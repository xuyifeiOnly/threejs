<script setup lang="ts">
import { onMounted } from 'vue'
onMounted(() => {
  let pathLength = document.querySelectorAll('path')
  pathLength.forEach((item, index) => {
    let itemLength = Math.ceil(item.getTotalLength())
    item.setAttribute('stroke-dasharray', itemLength.toString())
    item.setAttribute('stroke-dashoffset', itemLength.toString())
  })
})
</script>

<template>
  <div class="my_container">
    <!-- <svg
      t="1680768501833"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="13712"
      width="500"
      height="500"
      fill="none"
      stroke="black"
      stroke-width="3"
    >
      <path
        d="M659.925333 128a74.666667 74.666667 0 0 1 71.338667 52.618667L754.56 256H821.333333c64.8 0 117.333333 52.533333 117.333334 117.333333v426.666667c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V373.333333c0-64.8 52.533333-117.333333 117.333334-117.333333h66.773333l23.296-75.381333A74.666667 74.666667 0 0 1 364.074667 128h295.850666zM512 405.333333c-88.362667 0-160 71.637333-160 160 0 88.362667 71.637333 160 160 160 88.362667 0 160-71.637333 160-160 0-88.362667-71.637333-160-160-160z m0 256a96 96 0 1 0 0-192 96 96 0 0 0 0 192z"
        p-id="13713"
      ></path>
    </svg> -->
    <svg
      t="1680767337930"
      class="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="7234"
      width="420"
      height="420"
      fill="none"
      stroke="black"
      stroke-width="3"
    >
      <path
        d="M512.152 1008a30.576 30.576 0 0 1-30.584-30.584V710.504a30.56 30.56 0 0 1 30.584-30.584 30.568 30.568 0 0 1 30.592 30.584v266.904A30.576 30.576 0 0 1 512.152 1008z"
        p-id="7235"
      ></path>
      <path
        d="M511.608 998.504a30.576 30.576 0 0 1-30.592-30.584c0-123.792-167.04-224.488-372.376-224.488a30.576 30.576 0 0 1-30.584-30.584 30.568 30.568 0 0 1 30.584-30.592c243.12 0 433.552 125.496 433.552 285.664a30.576 30.576 0 0 1-30.584 30.584z"
        p-id="7236"
      ></path>
      <path
        d="M512.328 998.504a30.576 30.576 0 0 1-30.592-30.584c0-160.168 190.464-285.664 433.624-285.664a30.56 30.56 0 0 1 30.576 30.592 30.568 30.568 0 0 1-30.576 30.584c-201.88 0-372.44 102.792-372.44 224.488a30.576 30.576 0 0 1-30.592 30.584z"
        p-id="7237"
      ></path>
      <path
        d="M915.36 679.68c-160.528 0-297.672 54.872-372.616 138.128V707.936c0-2.984-0.904-5.68-1.712-8.424-3.696-12.728-14.968-22.168-28.88-22.168-0.296 0-0.536 0.152-0.832 0.168v327.728c0.296 0.032 0.536 0.176 0.832 0.176a30.568 30.568 0 0 0 30.592-30.592v-8.6c0-0.32 0.176-0.56 0.176-0.888 0-121.704 170.552-224.488 372.44-224.488a30.56 30.56 0 0 0 30.576-30.592 30.568 30.568 0 0 0-30.576-30.576z"
        p-id="7238"
      ></path>
      <path
        d="M335.192 460.24c72.168 0.096 135.856-35.544 175.048-90.024-39.192-54.368-102.88-89.944-174.992-89.88-72.232-0.056-135.976 35.456-175.104 89.936 39.072 54.424 102.872 90.04 175.048 89.968zM693.832 460.608c-72.12-0.032-135.808-35.664-174.928-90 39.184-54.512 102.816-90.096 174.976-90.064 72.232 0.032 135.912 35.544 175.112 90.04-39.192 54.416-102.872 89.992-175.16 90.024z"
        p-id="7239"
      ></path>
      <path
        d="M514.776 374.752c-54.488 39.192-90.096 102.824-90.096 174.96 0.064 72.288 35.608 135.976 90.096 175.168 54.36-39.256 89.984-102.88 89.984-175.168 0-72.136-35.616-135.824-89.984-174.96zM514.36 366.064c54.536-39.192 90.16-102.792 90.024-175.08C604.448 118.872 568.896 55.128 514.424 16c-54.488 39.128-90.032 102.824-89.976 175.072 0 72.2 35.544 135.792 89.912 174.992z"
        p-id="7240"
      ></path>
      <path
        d="M514.424 16c-1.08 0.776-2.032 1.736-3.112 2.504v345.08c1.048 0.776 1.976 1.696 3.048 2.48 54.536-39.192 90.16-102.792 90.024-175.08C604.448 118.872 568.896 55.128 514.424 16zM511.312 722.064c1.192 0.896 2.272 1.944 3.464 2.824 9.432-6.824 18.04-14.584 26.256-22.8a217.816 217.816 0 0 0 44.096-63.424c1.104-2.384 2.24-4.752 3.256-7.168a193.84 193.84 0 0 0 4.504-12.16 223.216 223.216 0 0 0 6.312-21.808c1.088-4.816 1.952-9.688 2.696-14.64 0.488-2.896 1.016-5.768 1.376-8.688 0.896-8.048 1.504-16.192 1.504-24.504 0-72.136-35.616-135.824-89.984-174.96-1.192 0.872-2.272 1.912-3.464 2.808v344.52z"
        p-id="7241"
      ></path>
    </svg>
  </div>
</template>
<style lang="scss" scoped>
// stroke-dasharray是用来设置每段虚线的长度。而stroke-dashoffset是用来设置移动的距离
//。所以实际上，stroke-dashoffset的大小，以及stroke-dasharray的大小，是要根据的自己的路径去填的。
.my_container {
  display: flex;
  align-items: center;
  justify-content: center;
  padding-top: 200px;
  box-sizing: border-box;

  .icon {
    @keyframes line-anm {
      to {
        stroke-dashoffset: 0;
      }
    }
    @keyframes fill-anm {
      from {
        fill: transparent;
      }
      to {
        fill: red;
        stroke: red;
      }
    }
    animation: fill-anm 0.5s ease forwards 2s;
    path {
      // stroke-dasharray: 500;
      // stroke-dashoffset: 500;
      animation: line-anm 4s ease forwards;
      // fill: transparent;
    }
    // path:nth-child(1) {
    //   // stroke-dasharray: 4196;
    //   // stroke-dashoffset: 4196;
    //   animation: line-anm 5s ease forwards;
    // }
    // path:nth-child(2) {
    //   stroke-dasharray: 3000;
    //   stroke-dashoffset: 3000;
    //   animation: line-anm 2s ease forwards 300ms;
    // }
  }
}
</style>
